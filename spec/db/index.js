// This file is autogenerated by the hyperdb compiler
/* eslint-disable camelcase */

const { IndexEncoder, c } = require('hyperdb/runtime')
const { version, getEncoding, setVersion } = require('./messages.js')

const helpers0 = require('../helpers.js')

// '@pear/manifest' collection key
const collection0_key = new IndexEncoder([], { prefix: 0 })

function collection0_indexify(record) {
  return []
}

// '@pear/manifest' value encoding
const collection0_enc = getEncoding('@pear/manifest')

// '@pear/manifest' reconstruction function
function collection0_reconstruct(version, keyBuf, valueBuf) {
  setVersion(version)
  const record = c.decode(collection0_enc, valueBuf)
  return record
}
// '@pear/manifest' key reconstruction function
function collection0_reconstruct_key(keyBuf) {
  return {}
}

// '@pear/manifest'
const collection0 = {
  name: '@pear/manifest',
  id: 0,
  encodeKey(record) {
    const key = []
    return collection0_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection0_key.encodeRange({
      gt: gt ? collection0_indexify(gt) : null,
      lt: lt ? collection0_indexify(lt) : null,
      gte: gte ? collection0_indexify(gte) : null,
      lte: lte ? collection0_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection0_enc, record)
  },
  trigger: null,
  reconstruct: collection0_reconstruct,
  reconstructKey: collection0_reconstruct_key,
  indexes: []
}

// '@pear/dht' collection key
const collection1_key = new IndexEncoder([], { prefix: 1 })

function collection1_indexify(record) {
  return []
}

// '@pear/dht' value encoding
const collection1_enc = getEncoding('@pear/dht')

// '@pear/dht' reconstruction function
function collection1_reconstruct(version, keyBuf, valueBuf) {
  setVersion(version)
  const record = c.decode(collection1_enc, valueBuf)
  return record
}
// '@pear/dht' key reconstruction function
function collection1_reconstruct_key(keyBuf) {
  return {}
}

// '@pear/dht'
const collection1 = {
  name: '@pear/dht',
  id: 1,
  encodeKey(record) {
    const key = []
    return collection1_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection1_key.encodeRange({
      gt: gt ? collection1_indexify(gt) : null,
      lt: lt ? collection1_indexify(lt) : null,
      gte: gte ? collection1_indexify(gte) : null,
      lte: lte ? collection1_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection1_enc, record)
  },
  trigger: null,
  reconstruct: collection1_reconstruct,
  reconstructKey: collection1_reconstruct_key,
  indexes: []
}

// '@pear/gc' collection key
const collection2_key = new IndexEncoder([IndexEncoder.STRING], { prefix: 2 })

function collection2_indexify(record) {
  const a = record.path
  return a === undefined ? [] : [a]
}

// '@pear/gc' value encoding
const collection2_enc = getEncoding('@pear/gc/hyperdb#2')

// '@pear/gc' reconstruction function
function collection2_reconstruct(version, keyBuf, valueBuf) {
  const key = collection2_key.decode(keyBuf)
  setVersion(version)
  const record = c.decode(collection2_enc, valueBuf)
  record.path = key[0]
  return record
}
// '@pear/gc' key reconstruction function
function collection2_reconstruct_key(keyBuf) {
  const key = collection2_key.decode(keyBuf)
  return {
    path: key[0]
  }
}

// '@pear/gc'
const collection2 = {
  name: '@pear/gc',
  id: 2,
  encodeKey(record) {
    const key = [record.path]
    return collection2_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection2_key.encodeRange({
      gt: gt ? collection2_indexify(gt) : null,
      lt: lt ? collection2_indexify(lt) : null,
      gte: gte ? collection2_indexify(gte) : null,
      lte: lte ? collection2_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection2_enc, record)
  },
  trigger: null,
  reconstruct: collection2_reconstruct,
  reconstructKey: collection2_reconstruct_key,
  indexes: []
}

// '@pear/traits' collection key
const collection3_key = new IndexEncoder([IndexEncoder.STRING], { prefix: 3 })

function collection3_indexify(record) {
  const a = record.link
  return a === undefined ? [] : [a]
}

// '@pear/traits' value encoding
const collection3_enc = getEncoding('@pear/traits/hyperdb#3')

// '@pear/traits' reconstruction function
function collection3_reconstruct(version, keyBuf, valueBuf) {
  const key = collection3_key.decode(keyBuf)
  setVersion(version)
  const record = c.decode(collection3_enc, valueBuf)
  record.link = key[0]
  return record
}
// '@pear/traits' key reconstruction function
function collection3_reconstruct_key(keyBuf) {
  const key = collection3_key.decode(keyBuf)
  return {
    link: key[0]
  }
}

// '@pear/traits'
const collection3 = {
  name: '@pear/traits',
  id: 3,
  encodeKey(record) {
    const key = [record.link]
    return collection3_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection3_key.encodeRange({
      gt: gt ? collection3_indexify(gt) : null,
      lt: lt ? collection3_indexify(lt) : null,
      gte: gte ? collection3_indexify(gte) : null,
      lte: lte ? collection3_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection3_enc, record)
  },
  trigger: null,
  reconstruct: collection3_reconstruct,
  reconstructKey: collection3_reconstruct_key,
  indexes: []
}

// '@pear/assets' collection key
const collection4_key = new IndexEncoder([IndexEncoder.STRING], { prefix: 4 })

function collection4_indexify(record) {
  const a = record.link
  return a === undefined ? [] : [a]
}

// '@pear/assets' value encoding
const collection4_enc = getEncoding('@pear/assets/hyperdb#4')

// '@pear/assets' reconstruction function
function collection4_reconstruct(version, keyBuf, valueBuf) {
  const key = collection4_key.decode(keyBuf)
  setVersion(version)
  const record = c.decode(collection4_enc, valueBuf)
  record.link = key[0]
  return record
}
// '@pear/assets' key reconstruction function
function collection4_reconstruct_key(keyBuf) {
  const key = collection4_key.decode(keyBuf)
  return {
    link: key[0]
  }
}

// '@pear/assets'
const collection4 = {
  name: '@pear/assets',
  id: 4,
  encodeKey(record) {
    const key = [record.link]
    return collection4_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection4_key.encodeRange({
      gt: gt ? collection4_indexify(gt) : null,
      lt: lt ? collection4_indexify(lt) : null,
      gte: gte ? collection4_indexify(gte) : null,
      lte: lte ? collection4_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection4_enc, record)
  },
  trigger: null,
  reconstruct: collection4_reconstruct,
  reconstructKey: collection4_reconstruct_key,
  indexes: []
}

// '@pear/current' collection key
const collection5_key = new IndexEncoder([IndexEncoder.STRING], { prefix: 5 })

function collection5_indexify(record) {
  const a = record.link
  return a === undefined ? [] : [a]
}

// '@pear/current' value encoding
const collection5_enc = getEncoding('@pear/current/hyperdb#5')

// '@pear/current' reconstruction function
function collection5_reconstruct(version, keyBuf, valueBuf) {
  const key = collection5_key.decode(keyBuf)
  setVersion(version)
  const record = c.decode(collection5_enc, valueBuf)
  record.link = key[0]
  return record
}
// '@pear/current' key reconstruction function
function collection5_reconstruct_key(keyBuf) {
  const key = collection5_key.decode(keyBuf)
  return {
    link: key[0]
  }
}

// '@pear/current'
const collection5 = {
  name: '@pear/current',
  id: 5,
  encodeKey(record) {
    const key = [record.link]
    return collection5_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection5_key.encodeRange({
      gt: gt ? collection5_indexify(gt) : null,
      lt: lt ? collection5_indexify(lt) : null,
      gte: gte ? collection5_indexify(gte) : null,
      lte: lte ? collection5_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection5_enc, record)
  },
  trigger: null,
  reconstruct: collection5_reconstruct,
  reconstructKey: collection5_reconstruct_key,
  indexes: []
}

// '@pear/traits-by-tags' collection key
const index6_key = new IndexEncoder([IndexEncoder.STRING, IndexEncoder.STRING], { prefix: 6 })

// '@pear/traits-by-tags' has the following schema defined key map
const index6_map = helpers0.tags

function index6_indexify(record) {
  const a = record
  return a === undefined ? [] : [a]
}

// '@pear/traits-by-tags'
const index6 = {
  name: '@pear/traits-by-tags',
  id: 6,
  encodeKey(record) {
    return index6_key.encode(index6_indexify(record))
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return index6_key.encodeRange({
      gt: gt || gt === '' ? index6_indexify(gt) : null,
      lt: lt || lt === '' ? index6_indexify(lt) : null,
      gte: gte || gte === '' ? index6_indexify(gte) : null,
      lte: lte || lte === '' ? index6_indexify(lte) : null
    })
  },
  encodeValue: (doc) => index6.collection.encodeKey(doc),
  encodeIndexKeys(record, context) {
    const mapped = index6_map(record, context)
    const keys = new Array(mapped.length)
    for (let i = 0; i < mapped.length; i++) {
      const mappedRecord = mapped[i]
      keys[i] = index6_key.encode([mappedRecord, record.link])
    }
    return keys
  },
  reconstruct: (keyBuf, valueBuf) => valueBuf,
  offset: collection3.indexes.length,
  collection: collection3
}
collection3.indexes.push(index6)

// '@pear/presets' collection key
const collection7_key = new IndexEncoder([IndexEncoder.STRING], { prefix: 7 })

function collection7_indexify(record) {
  const a = record.link
  return a === undefined ? [] : [a]
}

// '@pear/presets' value encoding
const collection7_enc = getEncoding('@pear/presets/hyperdb#7')

// '@pear/presets' reconstruction function
function collection7_reconstruct(version, keyBuf, valueBuf) {
  const key = collection7_key.decode(keyBuf)
  setVersion(version)
  const record = c.decode(collection7_enc, valueBuf)
  record.link = key[0]
  return record
}
// '@pear/presets' key reconstruction function
function collection7_reconstruct_key(keyBuf) {
  const key = collection7_key.decode(keyBuf)
  return {
    link: key[0]
  }
}

// '@pear/presets'
const collection7 = {
  name: '@pear/presets',
  id: 7,
  encodeKey(record) {
    const key = [record.link]
    return collection7_key.encode(key)
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return collection7_key.encodeRange({
      gt: gt ? collection7_indexify(gt) : null,
      lt: lt ? collection7_indexify(lt) : null,
      gte: gte ? collection7_indexify(gte) : null,
      lte: lte ? collection7_indexify(lte) : null
    })
  },
  encodeValue(version, record) {
    setVersion(version)
    return c.encode(collection7_enc, record)
  },
  trigger: null,
  reconstruct: collection7_reconstruct,
  reconstructKey: collection7_reconstruct_key,
  indexes: []
}

// '@pear/presets-by-command' collection key
const index8_key = new IndexEncoder(
  [IndexEncoder.STRING, IndexEncoder.STRING, IndexEncoder.STRING],
  { prefix: 8 }
)

function index8_indexify(record) {
  const arr = []

  const a0 = record.link
  if (a0 === undefined) return arr
  arr.push(a0)

  const a1 = record.command
  if (a1 === undefined) return arr
  arr.push(a1)

  const a2 = record.link
  if (a2 === undefined) return arr
  arr.push(a2)

  return arr
}

// '@pear/presets-by-command'
const index8 = {
  name: '@pear/presets-by-command',
  id: 8,
  encodeKey(record) {
    return index8_key.encode(index8_indexify(record))
  },
  encodeKeyRange({ gt, lt, gte, lte } = {}) {
    return index8_key.encodeRange({
      gt: gt ? index8_indexify(gt) : null,
      lt: lt ? index8_indexify(lt) : null,
      gte: gte ? index8_indexify(gte) : null,
      lte: lte ? index8_indexify(lte) : null
    })
  },
  encodeValue: (doc) => index8.collection.encodeKey(doc),
  encodeIndexKeys(record, context) {
    return [index8_key.encode([record.link, record.command, record.link])]
  },
  reconstruct: (keyBuf, valueBuf) => valueBuf,
  offset: collection7.indexes.length,
  collection: collection7
}
collection7.indexes.push(index8)

const collections = [
  collection0,
  collection1,
  collection2,
  collection3,
  collection4,
  collection5,
  collection7
]

const indexes = [index6, index8]

module.exports = {
  version,
  collections,
  indexes,
  resolveCollection,
  resolveIndex
}

function resolveCollection(name) {
  switch (name) {
    case '@pear/manifest':
      return collection0
    case '@pear/dht':
      return collection1
    case '@pear/gc':
      return collection2
    case '@pear/traits':
      return collection3
    case '@pear/assets':
      return collection4
    case '@pear/current':
      return collection5
    case '@pear/presets':
      return collection7
    default:
      return null
  }
}

function resolveIndex(name) {
  switch (name) {
    case '@pear/traits-by-tags':
      return index6
    case '@pear/presets-by-command':
      return index8
    default:
      return null
  }
}
